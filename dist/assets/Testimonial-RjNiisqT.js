import{e as m,r,j as e}from"./index-COlOKGVa.js";import{T as v}from"./Topbar-C2H_McEf.js";const S="http://lyncorganikness.ap-south-1.elasticbeanstalk.com/api/testimonials/addTestimonial",A="http://lyncorganikness.ap-south-1.elasticbeanstalk.com/api/testimonials/getAll",z="http://lyncorganikness.ap-south-1.elasticbeanstalk.com/api/testimonials/updateTestimonial",I="http://lyncorganikness.ap-south-1.elasticbeanstalk.com/api/testimonials/deleteTestimonial",$=async s=>{console.log(s);const a=localStorage.getItem("authToken");if(!a)throw new Error("No token found, please login");try{const o=await m.post(S,s,{headers:{Authorization:`Bearer ${a}`}});return console.log("Testimonial added successfully:",o.data),o.data}catch(o){h(o,"Error adding testimonial")}},L=async()=>{const s=localStorage.getItem("authToken");if(!s)throw new Error("No token found, please login");try{const a=await m.get(A,{headers:{Authorization:`Bearer ${s}`}});return console.log("All testimonials fetched successfully:",a.data),a.data}catch(a){h(a,"Error fetching testimonials")}},q=async(s,a)=>{const o=localStorage.getItem("authToken");if(!o)throw new Error("No token found, please login");try{const i=await m.put(`${z}/${s}`,a,{headers:{Authorization:`Bearer ${o}`}});return console.log("Testimonial updated successfully:",i.data),i.data}catch(i){h(i,"Error updating testimonial")}},_=async s=>{const a=localStorage.getItem("authToken");if(!a)throw new Error("No token found, please login");try{const o=await m.delete(`${I}/${s}`,{headers:{Authorization:`Bearer ${a}`}});return console.log("Testimonial deleted successfully:",o.data),o.data}catch(o){h(o,"Error deleting testimonial")}},h=(s,a)=>{throw s.response?(console.error(`${a}:`,s.response.data),new Error(`Error: ${s.response.status} - ${s.response.data}`)):s.request?(console.error("No response received:",s.request),new Error("Network error, please check your connection.")):new Error(`Error: ${s.message}`)},D=()=>{const[s,a]=r.useState([]),[o,i]=r.useState(""),[u,g]=r.useState(""),[N,f]=r.useState(""),[p,c]=r.useState(""),[T,x]=r.useState(""),[d,j]=r.useState(null);r.useEffect(()=>{(async()=>{try{const n=await L();a(n)}catch(n){c(n.message)}})()},[]);const w=async t=>{if(t.preventDefault(),!o.trim()||!u.trim()){c("Name and testimonial content are required.");return}const n={name:u,organizationName:N||null,content:o};try{let l;d?(l=await q(d.id,n),x("Testimonial updated successfully!")):(l=await $(n),x("Testimonial added successfully!")),a(b=>d?b.map(y=>y.id===d.id?l:y):[l,...b]),i(""),g(""),f(""),c(""),j(null)}catch(l){c(l.message)}},E=async t=>{try{await _(t),a(s.filter(n=>n.id!==t)),x("Testimonial deleted successfully!")}catch(n){c(n.message)}},k=t=>{const n=s.find(l=>l.id===t);j(n),i(n.content),g(n.name),f(n.organizationName||"")};return e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx(v,{title:"Testimonials",userName:"Neha Sharma",showSearchBar:!1}),e.jsxs("div",{className:"container-fluid mt-4",children:[e.jsxs("form",{onSubmit:w,className:"mb-4",children:[p&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:p}),T&&e.jsx("div",{className:"alert alert-success",role:"alert",children:T}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"testimonialText",className:"form-label",children:"Type Testimonial"}),e.jsx("textarea",{id:"testimonialText",className:"form-control",rows:"6",value:o,onChange:t=>i(t.target.value)})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:"name",className:"form-label",children:"Name"}),e.jsx("input",{type:"text",id:"name",className:"form-control",value:u,onChange:t=>g(t.target.value)})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:"organization",className:"form-label",children:"Organization"}),e.jsx("input",{type:"text",id:"organization",className:"form-control",value:N,onChange:t=>f(t.target.value)})]})]}),e.jsxs("button",{type:"submit",className:"btn btn-dark",children:[d?"Update":"Add"," "]})]}),e.jsxs("div",{className:"testimonials-container",children:[e.jsx("h3",{className:"mb-4 text-white",children:"Testimonials"}),e.jsx("div",{className:"row",children:s.length>0?s.map(t=>e.jsxs("div",{className:"col-md-4 col-sm-12 mb-3",children:[e.jsx("div",{className:"card p-4 shadow-sm testimonial-card",children:e.jsxs("blockquote",{className:"blockquote mb-0 text-left",children:[e.jsx("div",{className:"testimonial-quote-icon",children:e.jsx("i",{className:"fas fa-quote-left"})}),e.jsx("p",{className:"testimonial-text",children:t.content}),e.jsx("div",{className:"testimonial-quote-icon",children:e.jsx("i",{className:"fas fa-quote-right"})})]})}),e.jsxs("div",{className:"card-footer testimonial-footer d-flex justify-content-between align-items-center bg-dark",children:[e.jsxs("div",{className:"testimonial-info ms-3 my-2",children:[e.jsx("strong",{children:t.name}),e.jsx("div",{children:t.organizationName||"No Organization"})]}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("button",{className:"btn btn-outline-light btn-sm border-0",onClick:()=>k(t.id),children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx("button",{className:"btn btn-outline-light btn-sm me-3 border-0",onClick:()=>E(t.id),children:e.jsx("i",{className:"fas fa-trash"})})]})]})]},t.id)):e.jsx("p",{children:"No testimonials added yet."})})]})]})]})};export{D as default};
