import{r,u as L,c as R,j as e,F as B,d as I}from"./index-COlOKGVa.js";import{T}from"./Topbar-C2H_McEf.js";import{S as $}from"./SellerBuyerService-CyBNmB6f.js";/* empty css                     */import{P as M}from"./Pagination-CudtAkz1.js";import{p as O}from"./Ellipse 3-CyACr4uG.js";const x=8,Q=()=>{const[n,f]=r.useState("both"),[j,y]=r.useState([]),[S,N]=r.useState(!0),[u,v]=r.useState(null),[o,l]=r.useState(1),[i,w]=r.useState(""),[P,m]=r.useState(!1),g=localStorage.getItem("token"),C=L(),b=R();r.useEffect(()=>{var s;const t=((s=b.state)==null?void 0:s.currentPage)||1;l(t)},[b.state]),r.useEffect(()=>{(async()=>{try{const s=await $.fetchAllUsers(g);y(s.sort((d,h)=>new Date(h.createdAt)-new Date(d.createdAt)))}catch(s){v(s.message)}finally{N(!1)}})()},[g]);const c=t=>{f(t),l(1)},E=t=>{C(`/edit-user/${t}`,{state:{currentPage:o}})},A=t=>{const s=new Date,d=new Date(t),h=Math.abs(s-d);return Math.floor(h/(1e3*60*60*24))},a=j.filter(t=>n==="both"?t.buyer||t.seller:n==="buyer"?t.buyer&&!t.seller:n==="seller"?t.seller&&!t.buyer:!0).filter(t=>{const s=i.toLowerCase();return t.fullName.toLowerCase().includes(s)||t.email.toLowerCase().includes(s)}),p=o*x,U=p-x,z=a.slice(U,p),k=Math.ceil(a.length/x),D=t=>{l(t)},F=t=>{w(t),m(a.length===0&&t.trim()!==""),l(1)};return r.useEffect(()=>{m(a.length===0&&i.trim()!=="")},[a,i]),S?e.jsx("div",{children:"Loading users..."}):u?e.jsxs("div",{children:["Error: ",u]}):e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx(T,{title:"User List",showSearchBar:!0,handleProductSearch:()=>{},handleUserSearch:F}),P&&e.jsx("div",{style:{left:"0",fontSize:"1.2rem",color:"red",textAlign:"center",marginTop:"15px"},children:"No results found"}),e.jsxs("div",{className:"container-fluid my-4",children:[e.jsx("div",{className:"btn-group-container",children:e.jsxs("div",{className:"btn-group mb-3",role:"group","aria-label":"Filter buttons",children:[e.jsx("button",{className:`btn btn-outline-warning ${n==="seller"?"active":""}`,onClick:()=>c("seller"),children:"Sellers"}),e.jsx("button",{className:`btn btn-outline-warning ${n==="buyer"?"active":""}`,onClick:()=>c("buyer"),children:"Buyers"}),e.jsx("button",{className:`btn btn-outline-warning ${n==="both"?"active":""}`,onClick:()=>c("both"),children:"Both"})]})}),e.jsxs("div",{className:"table-responsive",children:[e.jsxs("table",{className:"table table-hover custom-table",style:{borderRadius:"15px",border:"1px solid #E9E9E9",overflow:"hidden",backgroundColor:"#F6F6F6"},children:[e.jsx("thead",{className:"table-header",children:e.jsxs("tr",{children:[e.jsx("th",{children:"User Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Registered"}),e.jsx("th",{children:"State"}),e.jsx("th",{children:"Company"}),e.jsx("th",{children:"Orders"}),e.jsx("th",{children:"Waive Sample Fee"})]})}),e.jsx("tbody",{children:z.map(t=>e.jsxs("tr",{children:[e.jsx("td",{style:{borderBottom:"1px solid #E9E9E9"},children:e.jsxs("div",{className:"align-items-center d-flex custom-table",children:[e.jsx("img",{src:t.profilePictureUrl||O,alt:t.fullName,className:"product-image rounded-circle me-2",style:{width:"25px",height:"25px",cursor:"pointer"},onClick:()=>E(t.userId)}),e.jsxs("div",{style:{fontSize:"12px"},children:[e.jsx("span",{children:t.fullName}),e.jsx("br",{}),e.jsx(B,{icon:I,size:"xs",className:`me-1 ${t.seller?"text-success":"text-primary"}`}),e.jsx("span",{style:{color:"#A8A4A4",fontSize:"12px"},children:t.seller?"Seller":"Buyer"})]})]})}),e.jsx("td",{style:{fontSize:"14px"},children:t.email}),e.jsxs("td",{style:{fontSize:"14px"},children:[new Date(t.createdAt).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}),e.jsx("br",{}),e.jsxs("small",{style:{color:"#A8A4A4",fontSize:"12px"},children:[A(t.createdAt)," days ago"]})]}),e.jsx("td",{style:{fontSize:"14px"},children:t.state}),e.jsx("td",{style:{fontSize:"14px"},children:t.companyName||"N/A"}),e.jsx("td",{style:{fontSize:"14px"},children:e.jsx("span",{className:`badge ${t.ordersPending>0?"badge-danger":"badge-success"}`,children:t.ordersPending>0?`${t.ordersPending} Pending`:"No Pending"})}),e.jsx("td",{children:e.jsxs("div",{className:"toggle-container",style:{backgroundColor:"#e9e9e9",width:"160px",borderRadius:"15px",display:"flex",alignItems:"center",padding:"5px",position:"relative"},children:[e.jsx("button",{className:"btn btn-success",style:{backgroundColor:"limegreen",color:"black",borderRadius:"15px",border:"none",padding:"5px 15px",marginRight:"5px",fontSize:"12px",zIndex:1},children:"Enable"}),e.jsx("button",{className:"btn btn-danger",style:{backgroundColor:"#e7c1c1",color:"black",borderRadius:"15px",fontSize:"12px",border:"none",padding:"5px 15px",zIndex:1},children:"Disable"})]})})]},t.userId))})]}),e.jsx(M,{currentPage:o,totalPages:k,onPageChange:D})]})]})]})};export{Q as default};
