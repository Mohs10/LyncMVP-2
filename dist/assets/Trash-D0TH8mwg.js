import{e as P,u as S,r as c,j as e,R as k}from"./index-COlOKGVa.js";import{a as w}from"./ProductService-BTIW0j6s.js";import{T as I}from"./Topbar-C2H_McEf.js";import{B as E}from"./Back-DUcgJcu8.js";const C="http://lyncorganikness.ap-south-1.elasticbeanstalk.com/api/inactiveProducts",R=async()=>{try{const s=await P.get(C);return console.log("Inactive products fetched successfully:",s.data),s.data}catch(s){$(s,"Error fetching inactive products")}},$=(s,i)=>{throw s.response?(console.error(`${i}:`,s.response.data),new Error(`Error: ${s.response.status} - ${s.response.data}`)):s.request?(console.error("No response received:",s.request),new Error("Network error, please check your connection.")):new Error(`Error: ${s.message}`)},q=()=>{S();const[s,i]=c.useState([]),[j,p]=c.useState(!0),[d,h]=c.useState(null),[a,o]=c.useState(1),[l]=c.useState(5),[N,f]=c.useState("");c.useEffect(()=>{(async()=>{try{const r=await R();i(r)}catch{h("Failed to load inactive products.")}finally{p(!1)}})()},[]);const g=async t=>{try{await w(t),i(s.filter(r=>r.productId!==t))}catch{h("Failed to restore product.")}},v=t=>{f(t),o(1)},u=s.filter(t=>t.productName.toLowerCase().includes(N.toLowerCase())),m=a*l,b=m-l,x=u.slice(b,m),n=Math.ceil(u.length/l);return j?e.jsx("div",{children:"Loading inactive products..."}):d?e.jsxs("div",{children:["Error: ",d]}):e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx(I,{title:"Inactive Product",userName:"Neha Sharma",showSearchBar:!0,handleInactiveProductSearch:v}),e.jsxs("div",{className:"container-fluid mt-4",children:[e.jsx("div",{className:"margin-bottom-custom",children:e.jsx(E,{})}),e.jsx("div",{className:"table-responsive mt-4",children:e.jsxs("table",{className:"table table-hover custom-table",children:[e.jsx("thead",{className:"table-header",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Product"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Variety"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:x.length>0?x.map(t=>e.jsxs("tr",{children:[e.jsxs("td",{className:"d-flex align-items-center",children:[e.jsx("img",{src:t.productImageUrl1||"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS_sIhHxPJsvahah4pUDPtiX26SAgt8CzRvQsJ4UII5y1S1utsDVOoRmsmQi-HHhuJtjkw&usqp=CAU",alt:t.productName,className:"me-3 product-image",style:{cursor:"pointer"}}),e.jsx("span",{children:t.productName})]}),e.jsx("td",{children:t.category.categoryName}),e.jsx("td",{children:t.variety.varietyName}),e.jsx("td",{children:t.types&&t.types.length>0?t.types.map(r=>r.typeName).join(", "):"N/A"}),e.jsx("td",{children:e.jsxs("button",{className:"btn-action",onClick:()=>g(t.productId),children:[e.jsx("i",{className:"fa fa-undo"})," Restore"]})})]},t.productId)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center",children:"No inactive products found."})})})]})}),e.jsx("nav",{"aria-label":"Page navigation",children:e.jsxs("ul",{className:"pagination justify-content-left mt-4",children:[e.jsx("li",{className:`page-item ${a===1?"disabled":""}`,children:e.jsx("button",{className:"page-link no-border",onClick:()=>a>1&&o(a-1),disabled:a===1,"aria-label":"Previous",children:"‹ Previous "})}),Array.from({length:n},(t,r)=>r+1).filter(t=>t===1||t===n||t>=a-1&&t<=a+1).map((t,r,y)=>e.jsxs(k.Fragment,{children:[r>0&&t!==y[r-1]+1&&e.jsx("li",{className:"page-item disabled",children:e.jsx("span",{className:"page-link no-border",children:"..."})}),e.jsx("li",{className:`page-item ${t===a?"active":""}`,children:e.jsx("button",{className:"page-link no-border",onClick:()=>o(t),"aria-label":`Page ${t}`,children:t})})]},t)),e.jsx("li",{className:`page-item ${a===n?"disabled":""}`,children:e.jsx("button",{className:"page-link no-border",onClick:()=>a<n&&o(a+1),disabled:a===n,"aria-label":"Next",children:"Next › "})})]})})]})]})};export{q as default};
